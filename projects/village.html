<!DOCTYPE html>
<html>
	<head>
		<title>Matteo Graizzaro Portfolio | Canals Village</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="../css/uikit.min.css" />
		<link rel="stylesheet" href="../css/styles.css" />
		<link rel="stylesheet" href="../css/slider.css" />
        <script src="../js/uikit.min.js"></script>
        <script src="../js/uikit-icons.min.js"></script>
	</head>
	<body>
		<div class="uk-position-relative" align="center">		
			<div class="uk-padding-small-top uk-section-muted uk-margin-medium-bottom">
				<div class="uk-width-1-1 uk-width-3xlarge@s" style="padding: 0 15px;">
					<header class="uk-padding-small-top uk-grid-small uk-grid-collapse@m uk-child-width-1-1" uk-grid>
						<h1>Matteo Graizzaro</h1>
						<h3 class="uk-text-large uk-text-light">Game Programmer</h3>
					</header>
					
					<hr class="uk-width-large uk-width-1-1@m uk-align-center uk-margin-remove-bottom">
				</div>
				
				<nav class="uk-navbar-container" uk-sticky="show-on-up: true; animation: uk-animation-slide-top; cls-active: uk-box-shadow-small; cls-inactive: uk-navbar-transparent;" uk-navbar>
					<div class="uk-navbar-center">
						<ul class="uk-navbar-nav uk-child-width-1-2">
							<li class="uk-padding-small"><a href="../">Home</a></li>
							<li class="uk-padding-small">
								<a>Projects</a>
								<div class="uk-navbar-dropdown uk-text-left" uk-drop="boundary: !nav; boundary-align: true; pos: bottom-justify; offset: 0">
									<div class="uk-navbar-dropdown-grid uk-child-width-expand uk-margin-remove-left" uk-grid>
										<ul class="uk-subnav uk-subnav-pill uk-flex-center uk-flex-left@m uk-text-center" uk-margin>
									   		<li class="uk-active"><a href="village.html">Canals Village<br><span class="uk-text-italic uk-text-capitalize">2021-Present</span></a></li>
											<li><a href="library.html">Whitches Library<br><span class="uk-text-italic uk-text-capitalize">2021</span></a></li>
											<li><a href="solitaire.html">Solitaire<br><span class="uk-text-italic uk-text-capitalize">2021</span></a></li>
											<li><a href="ploppem2.html">Ploppem 2<br><span class="uk-text-italic uk-text-capitalize">2021</span></a></li> 
											<li><a href="tunnel.html">Tunnel<br><span class="uk-text-italic uk-text-capitalize">2021</span></a></li>
											<li><a href="ploppem.html">Ploppem<br><span class="uk-text-italic uk-text-capitalize">2020-2021</span></a></li>
											<li><a href="nodib.html">Nodib<br><span class="uk-text-italic uk-text-capitalize">2020</span></a></li>
											<li><a href="oath.html">Oath<br><span class="uk-text-italic uk-text-capitalize">2018-2019</span></a></li>
										</ul>
									</div>
								</div>
							</li>
						</ul>
					</div>
				</nav>
			</div>
			
			<div class="uk-width-1-1 uk-width-3xlarge@s uk-margin-remove uk-position-relative" style="z-index: 10;">
				<div id="#sidebar" class="uk-text-left uk-sidebar-right uk-visible@l" style="width: 150px;">
					<div uk-sticky="offset: 50; width-element: #sidebar;">
						<ul uk-scrollspy-nav="closest: li; scroll: true; offset: 80; overflow: false" class="uk-nav-default uk-nav">
							<li>
								<a href="#">
									<span uk-icon="chevron-up" class="uk-margin-small-right uk-icon"></span>
									<span class="uk-text-middle">To top</span>
								</a>
							</li>
							<li class="uk-nav-divider"></li>
							<li><a href="#summary">Summary</a></li>
							<li><a href="#introduction">Introduction</a></li>
							<li><a href="#begin">Let's begin!</a></li>
							<li><a href="#roof-generation">Roof generation</a></li>
							<li><a href="#decorations">Decorations</a></li>
							<li><a href="#closing-thoughts">Closing thoughts</a></li>
							<!--<li class="uk-nav-divider"></li>
							<li>
								<a href="" target="_blank">
									<span uk-icon="artstation" class="uk-margin-small-right"></span>
									<span class="uk-text-middle">ArtStation</span>
								</a>
							</li>-->
						</ul>
					</div>
				</div>
			</div>
			
			<main class="uk-position-relative uk-text-left">
				<section class="uk-section uk-padding-remove-vertical">
					<!--<div class="uk-container uk-width-1-1 uk-width-2xlarge@s">
						<div class="uk-background-cover uk-height-medium uk-border-rounded" style="background-image: url(../img/projects/village/logo-small.jpg);"></div>
					</div>-->
					<div class="uk-container uk-width-1-1 uk-width-3xlarge@s">
						<div class="uk-flex uk-flex-middle" uk-alert="success">
							<span class="uk-margin-small-right" uk-icon="icon: warning; ratio: 1.5"></span>
							Project still in development
						</div>
					</div>
				</section>
				<!--<section class="uk-hidden@l">
					<div class="uk-padding-small-right uk-padding-small-left uk-flex-center uk-grid-column-small uk-margin-medium-top uk-grid-divider" style="font-size: 1.2rem;"uk-grid>
						<div>
							<a href="" target="_blank" class="uk-link uk-link-heading">
								<span uk-icon="icon: artstation; ratio: 1.5" class="uk-margin-small-right"></span>
								<span class="uk-text-middle">ArtStation</span>
							</a>
						</div>
					</div>
				</section>-->
				<section class="uk-section uk-section-xsmall">
					<div class="uk-container uk-width-1-1 uk-width-3xlarge@s">
						<h3 id="summary" class="title-link uk-heading-divider"><a href="#summary">Summary</a></h3>
						<div class="uk-child-width-1-1 uk-child-width-1-2@m" uk-grid="masonry: true;" style="margin-top: 30px;">
							<div class="uk-width-1-1@m">
								<p>I helped the artist improve his workflow by adding tools developed using blueprints. I didn't notice many changes in the systems from my <a class="uk-link" href="library.html" target="_blank">previous</a> UE4 experience, probably because I didn't have to explore its depth too much. This experience has shown my growth and I was able to more comfortably assist the author's efforts in bringing to life the project.</p>
							</div>
							<div class="uk-child-width-1-1 uk-width-auto@m">
								<h4 class="uk-heading-bullet uk-width-1-1"><span>Specifications</span></h4>
								<ul class="uk-list uk-list-circle">
									<li>Helped developing blueprints</li>
									<li>Developed in Unreal Engine 5 Alpha</li>
									<li>3D Environment</li>
								</ul>
							</div>
							<div class="uk-child-width-1-1 uk-width-expand@m">
								<h4 class="uk-heading-bullet uk-width-1-1"><span>Project goals</span></h4>
								<ul class="uk-list uk-list-circle">
									<li>Support the artist work by developing blueprints to speed up the environment's development</li>
									<li>Get in touch with the differences between UE4 and UE5</li>
								</ul>
							</div>
						</div>
					</div>
				</section>
				<section class="uk-section uk-section-xsmall">
					<div class="uk-container uk-width-1-1 uk-width-3xlarge@s">
						<h3 id="introduction" class="title-link uk-heading-divider"><a href="#introduction">Introduction</a></h3>
						<div class="uk-grid-small uk-child-width-1-1 uk-grid-row-medium" uk-grid>
							<div>
								<p>Hi, my name is Matteo Graizzaro, a mostly C# coder with some knowledge of other stuff. I'm currently employed as a <span class="uk-text-primary uk-text-bold">Junior Game Developer</span> in a mobile game company called <span class="uk-text-italic">Whatwapp</span>, and sometimes, after my daily shift, I like to help my brother, a 3D artist, with his Unreal Engine projects. I already gave him a little support for a previous project, developing blueprints involving <code>Splines</code>, <code>UI</code>, and more, but you can read about it in my other <a class="uk-link" href="library.html" target="_blank">breakdown</a>, and don't forget to go admire his  <span class="uk-text-danger">art piece</span> (still not online)<!--<a class="uk-link" href="" target="_blank">art piece</a>-->.<br>
								This time things will be simpler, but no less challenging.</p>
							</div>
						</div>
					</div>
				</section>
				<section class="uk-section uk-section-xsmall">
					<div class="uk-container uk-width-1-1 uk-width-3xlarge@s">
						<h3 id="begin" class="title-link uk-heading-divider"><a href="#begin">Let's begin!</a></h3>
						<div class="uk-grid-small uk-child-width-1-1 uk-grid-row-medium" uk-grid>
							<div>
								<p>As I entered the project all the changes in the level were made manually by the artist, one being the substitution of the windows meshes to test different wall compositions. Therefore, as a first task, I developed a small tool that using a slider allows the artist to quickly switch between the different meshes loaded in an array.</p>
							</div>
							<div>
								<div class="uk-position-relative uk-visible-toggle uk-child-width-1-1 uk-margin-small-bottom" uk-lightbox>
									<a class="uk-link-reset" href="../img/projects/village/window_switch-update_mesh.png" data-caption="Window switch update mesh blueprint">
										<div class="uk-inline uk-background-default">
											<img uk-toggle="cls: project-image-hover; mode: hover;" src="../img/projects/village/window_switch-update_mesh.png" alt="">
										</div>
									</a>
									<div class="uk-margin-small-top uk-text-center uk-text-italic">The blueprint to switch the window mesh.</div>
								</div>
							</div>
							<div>
								<p>Till now pretty straightforward, but things got tricky when switching windows whose sizes had different ratios. Luckily, the artist helped me by limiting the ratios to just two: 300x300 and 400x300. There is also a 500x300, but I wasn't able to handle that case and in accord with the artist I just ignored it.<br>
								To allow a mesh to fit in the same space previously occupied by a smaller or bigger mesh, I save the index of the current mesh, so when it is changed and the <code>constructor</code> is triggered, I can detect if the rate has changed and use a conversion ratio (in this case 3/4) to reduce or increase the scale of the actor. Unfortunately adding this additional variable was the only solution I found to the problem of not knowing which parameter has been edited when the constructor is called.</p>
							</div>
							<div>
								<div class="uk-position-relative uk-visible-toggle uk-child-width-1-1 uk-margin-small-bottom" uk-lightbox>
									<a class="uk-link-reset" href="../img/projects/village/window_switch-migrate_scale.png" data-caption="Window switch migrate scale blueprint">
										<div class="uk-inline uk-background-default">
											<img uk-toggle="cls: project-image-hover; mode: hover;" src="../img/projects/village/window_switch-migrate_scale.png" alt="">
										</div>
									</a>
									<div class="uk-margin-small-top uk-text-center uk-text-italic">The blueprint to migrate the scale when switching the window.</div>
								</div>
							</div>
						</div>
					</div>
				</section>
				<section class="uk-section uk-section-xsmall">
					<div class="uk-container uk-width-1-1 uk-width-3xlarge@s">
						<h3 id="roof-generation" class="title-link uk-heading-divider"><a href="#roof-generation">Roof generation</a></h3>
						<div class="uk-grid-small uk-child-width-1-1 uk-grid-row-medium" uk-grid>
							<div>
								<p>The most complex blueprint I had to work on so far in this project, has been the one responsible to handle the most common element in the entire environment... the roofs.<br>
								I started by asking the artist to explain to me the behavior he expected the tool to have, to extrapolate what I should have exposed as customization options, and after some back and forth I can summarize our conclusions with something around this line:</p>
								<blockquote cite="#">
									<p class="uk-margin-small-bottom">
										Generate a roof given <span class="uk-text-bold">length</span> & <span class="uk-text-bold">height</span>, and to be able to <span class="uk-text-bold">toggle both wings' visibility indipendently</span>. It also needs a <span class="uk-text-bold">gutter</span>.
									</p>
									<footer>The starting point</footer>
								</blockquote>
								<p>We can identify the following <span class="uk-label uk-label-success">7</span> features the blueprint must have:<br>
								<div class="uk-grid-column-small uk-grid-row-collapse uk-margin-small-top uk-margin-medium-bottom" uk-grid>
									<div><span class="uk-label uk-label-success">Length</span></div>
									<div><span class="uk-label uk-label-success">Toggle Top visibility</span></div>
									<div><span class="uk-label uk-label-success">Toggle Right Wing visibility</span></div>
									<div><span class="uk-label uk-label-success">Right Wing height</span></div>
									<div><span class="uk-label uk-label-success">Toggle Left Wing visibility</span></div>
									<div><span class="uk-label uk-label-success">Left Wing height</span></div>
									<div><span class="uk-label uk-label-success">Gutter</span></div>
								</div>
								On top of them I ended up up adding <span class="uk-label">8</span> more during development, in some cases forcing me to restructure big portions of the code.
								<div class="uk-grid-column-small uk-grid-row-collapse uk-margin-small-top uk-margin-medium-bottom" uk-grid>
									<div><span class="uk-label">Small lines on Right Wing</span></div>
									<div><span class="uk-label">Small lines on Left Wing</div>
									<div><span class="uk-label">Toggle Gutter visibility</span></div>
									<div><span class="uk-label">Custom meshes</span></div>
									<div><span class="uk-label">Material Custom Data Index</span></div>
									<div><span class="uk-label">Reset All option</span></div>
									<div><span class="uk-label">Mirroring</span></div>
									<div><span class="uk-label">Support for vertex paint</span></div>
								</div>
								And still, a couple didn't made the cut:
								<div class="uk-grid-column-small uk-grid-row-collapse uk-margin-small-top uk-margin-medium-bottom" uk-grid>
									<div><span class="uk-label uk-label-danger">Generation along a spline</span></div>
									<div><span class="uk-label uk-label-danger">Editable wing angles</div>
									<div><span class="uk-label uk-label-danger">Support beam</div>
								</div>
								Next time I will be more careful when drafting the base idea and I will make sure to consider even non-essential needs.
								</p>
							</div>
							<div>
								<h4 class="uk-heading-bullet">The basics, a line</h4>
								<p>A roof is constituted by a top and two wings (not their technically correct labels, it is just how I called them in the project).<br>
								Having established this, I started developing a way to generate the top (the central spine), by instantiating meshes in a line according to a predefined sequence of meshes using an <code>Instanced Static Mesh Component</code>, to improve the performance as much as I was able.</p>
							</div>
							<div>
								<div class="uk-child-width-1-2@m uk-flex uk-flex-middle" uk-grid>
									<div>
										<ul class="uk-list">
											<li><span class="uk-text-bold">Length 3</span>: 1 End - 1 MiddleA - 1 End</li>
											<li><span class="uk-text-bold">Length 5</span>: 1 End - 2 MiddleB - 1 MiddleA - 1 End</li>
											<li><span class="uk-text-bold">Length 8</span>: 1 End - 5 MiddleB - 1 MiddleA - 1 End</li>
										</ul>
									</div>
									<div class="uk-visible-toggle uk-child-width-1-1" uk-lightbox>
										<a class="uk-link-reset" href="../img/projects/village/roof_top.jpg" data-caption="The singular parts of a basic roof wing">
											<div class="uk-inline uk-background-default">
												<img uk-toggle="cls: project-image-hover; mode: hover;" src="../img/projects/village/roof_top.jpg" alt="">
											</div>
										</a>
									</div>
								</div>
							</div>
							<div>
								<p>The meshes I had to work with where grouped into trios composed by: an <span class="uk-text-italic">End</span>, a <span class="uk-text-italic">MiddleA</span> and a <span class="uk-text-italic">MiddleB</span>. From what you can see from the examples, the purpose of the <span class="uk-text-italic">MiddleA</span> is to connect an <span class="uk-text-italic">End</span> to a <span class="uk-text-italic">MiddleB</span> or another <span class="uk-text-italic">End</span>, and it is always the second to last piece. Meanwhile the <span class="uk-text-italic">MiddleB</span> makes up the majority of a roof. The <span class="uk-text-italic">End</span> is instead limited to the first and last piece, which has the particularity to be negatively scaled.</p>
								 <div class="uk-position-relative uk-visible-toggle uk-child-width-1-1 uk-margin-small-bottom" uk-lightbox>
									<a class="uk-link-reset" href="../img/projects/village/roof_generator-instantiate_line.png" data-caption="Roof generator line blueprint">
										<div class="uk-inline uk-background-default">
											<img uk-toggle="cls: project-image-hover; mode: hover;" src="../img/projects/village/roof_generator-instantiate_line.png" alt="">
										</div>
									</a>
									<div class="uk-margin-small-top uk-text-center uk-text-italic">The final blueprint responsible to instantiate a line, also used when generating a wing.</div>
								</div>
							</div>
							<div>
								<h4 class="uk-heading-bullet">The advanceds, wings</h4>
								<div class="uk-position-relative uk-visible-toggle uk-child-width-1-1 uk-margin-remove-adjacent uk-align-left uk-width-large@s" uk-lightbox>
									<a class="uk-link-reset" href="../img/projects/village/roof_parts.jpg" data-caption="The singular parts of a basic roof wing">
										<div class="uk-inline uk-background-default">
											<img uk-toggle="cls: project-image-hover; mode: hover;" src="../img/projects/village/roof_parts.jpg" alt="">
										</div>
									</a>
									<div class="uk-margin-small-top uk-text-center uk-text-italic">Basic wing. From top to bottom: large, small, gutter.</div>
								</div>
								<p>The wings were the biggest challenge due to being composed by many lines, each belonging to one of three types: large, small, and gutter. The image shows them in each possible combination. It was at this point that I simplified the code using a custom <code>Structure</code> to represent a single combination trio.</p>
								<p>When building a wing I just had to proceed line by line, picking the correct trio based on the row (and other customization's options), and the correct piece on its column.</p>
								<div class="uk-position-relative uk-visible-toggle uk-child-width-1-1 uk-margin-small-bottom" uk-lightbox>
									<a class="uk-link-reset" href="../img/projects/village/roof_generator-instantiate_wing.png" data-caption="Roof generator wing blueprint">
										<div class="uk-inline uk-background-default">
											<img uk-toggle="cls: project-image-hover; mode: hover;" src="../img/projects/village/roof_generator-instantiate_wing.png" alt="">
										</div>
									</a>
									<div class="uk-margin-small-top uk-text-center uk-text-italic">Final wing blueprint</div>
								</div>
							</div>
							<div>
								<h4 class="uk-heading-bullet">Final touches</h4>
								<p>After finishing most of the code I started putting in all the remaining customizations requested, some of which popped out later in the development, but at that point the blueprint was flexible enough to not needing too many edits to implement them.</p>
								<p>Some, like the ability to <span class="uk-text-bold">mirror</span> the wings (giving the priority to the right one), or to <span class="uk-text-bold">reset</span> everything to the defaults, and various toggles, were simple enough. Others, like the <span class="uk-text-bold">ability support of vertex painting</span>, made me spend a considerable amount of time in researching a solution, which turned out to be setting the <code>Collision Object Type</code> of the <code>Static Mesh Components</code> as <code>World Static</code>. It's surprising how, sometime, chasing a little thing can make waste so much time.</p>
								<p>The more complex change was adding the freedom to edit some each generated mesh (to inject details such as windows), because I was forced to scrumble all the use of Instanced Static Mesh Components, due to the blueprint complexity becoming unmanageable, an issue I was already struggling thanks to all the unscheduled changes. I replaced the instantiating system with one based on a Static Mesh Component for each mesh, a solution I was sure was less performing, but way more simpler.<br>
								Surprisingly, later on, during one of his many explorations in the deep of performance improvements, the artist discovered that the majority of roofs were still grouped in a singular <span class="uk-text-italic">draw call</span> even without using ISMCs. It was a big relief.</p>
								<p>All the meshes are now included in a public map, using a string representing the mesh position in the roof as key, that served the double purpose to allow a more human-readable identification when editing them. Only problem I was not able to overcame, was the particular case when a parameter is changed making some of the customizations no longer appliable, and therefore forgotten. For example, if the length is reduced and they are beyond the new value.</p>
							</div>
						</div>
					</div>
				</section>
				<section class="uk-section uk-section-xsmall">
					<div class="uk-container uk-width-1-1 uk-width-3xlarge@s">
						<h3 id="decorations" class="title-link uk-heading-divider"><a href="#decorations">Decorations</a></h3>
						<div class="uk-grid-small uk-child-width-1-1 uk-grid-row-medium" uk-grid>
							<div>
								<p>During the project I also produced a couple of simpler and quicker blueprints.</p>
								<p>For example, around the environment you can see some ropes adorned with colored triangles unfolding between the roofs. They are generated using a mesh instantiated along a spline, and other meshes placed at regular intervals.</p>
								<div class="uk-position-relative uk-visible-toggle uk-child-width-1-1 uk-margin-small-bottom" uk-lightbox>
									<a class="uk-link-reset" href="../img/projects/village/decoration_spline.png" data-caption="Decoration spline blueprint">
										<div class="uk-inline uk-background-default">
											<img uk-toggle="cls: project-image-hover; mode: hover;" src="../img/projects/village/decoration_spline.png" alt="">
										</div>
									</a>
									<div class="uk-margin-small-top uk-text-center uk-text-italic">The blueprint handling the party rope.</div>
								</div>
								<p>I also tried to code a tool using C++ instead of the blueprints. The experience had been quite complex, being my first time using the programming language and coding something in Unreal. But I was able to put together the script, responsible to generate a simple fence given its total length and that of a section (the space between two poles).</p>
							</div>
						</div>
					</div>
				</section>
				<section class="uk-section uk-section-xsmall">
					<div class="uk-container uk-width-1-1 uk-width-3xlarge@s">
						<h3 id="closing-thoughts" class="title-link uk-heading-divider"><a href="#closing-thoughts">Closing thoughts</a></h3>
						<div class="uk-grid-small uk-child-width-1-1 uk-grid-row-medium" uk-grid>
							<div class="uk-flex uk-flex-middle" uk-alert="success">
								<span class="uk-margin-small-right" uk-icon="icon: warning; ratio: 1.5"></span>
								Project still in development
							</div>
						</div>
					</div>
				</section>
			</main>
			
			<div class="uk-width-1-1 uk-width-3xlarge@s">
				<footer class="uk-margin-large-top uk-padding-small">
					<div class="uk-text-central uk-child-width-1-1" uk-grid>
						<div class="uk-child-width-1-1 uk-flex-center uk-child-width-auto@s uk-grid-collapse uk-grid-medium@s" uk-grid>
							<div>Email: <a href="">graizzaromatteo@gmail.com</a></div>
							<div>Phone: <a href="">+39 3939684029</a></div>
							<div>LinkedIn: <a href="">/in/matteo-graizzaro</a></div>
						</div>
						<div class="uk-child-width-1-1 uk-child-width-1-2@s uk-grid-collapse uk-margin-small-top" uk-grid>
							<div class="uk-text-left@s">
								Icons by <a href="https://simpleicons.org/" target="_blank">Simple Icons</a> & <a href="https://neuicons.com/" target="_blank">Neu Icons</a>
							</div>
							<div class="uk-text-right@s">
								© 2021 by Graizzaro Matteo
							</div>
						</div>
					</div>
				</footer>
			</div>
			
		</div>
	</body>
</html>